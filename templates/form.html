<!DOCTYPE html>
<html>
<head>
    <title>Lifestyle Advisor</title>
    <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>
<body>
    {% if logged_in %}
    <form method="post" action="{{ url_for('logout') }}">
        <input type="submit" value="Logout" />
    </form>
    {% else %}
    <form method="post" action="{{ url_for('login') }}">
        <input type="submit" value="Login" />
    </form>
    {% endif %}

    <h1>Lifestyle Advisor</h1>
    <form action="/submit" method="POST" onsubmit="showLoadingSpinner()">
        <div class="input-groups">
            <p><label for="age">Age :</label></p>
            <input type="number" id="age" name="age" value="25" required>
        </div>
        
        <div class="input-groupss">
            <p><label for="gender">Gender:</label></p>
            <div class="radio-group">
                <label><input type="radio" name="gender" value="male" required>Male</label>
                <label><input type="radio" name="gender" value="female" required>Female</label>
                <label><input type="radio" name="gender" value="prefer not to say" required checked>Prefer not to say</label>
            </div>
        </div>

        <p><label for="symptoms">Lifestyle issues or Symptoms if any:</label></p>
        <textarea id="symptoms" name="symptoms" rows="4" cols="50" required>Nothing</textarea><br>

        <button id="toggle-details" type="button" onclick="toggleDetails()">More Details</button>

        <section id="more-details" style="display: none;">
            <p><label for="height">Height (in cm):</label></p>
            <input type="number" id="height" name="height">
            
            <p><label for="weight">Weight (in kg):</label></p>
            <input type="number" id="weight" name="weight">
            
            <!-- Other questions go here -->
        </section>

        <div id="loading-spinner" class="hidden">
            <div class="spinner"></div>
        </div>

        <input type="submit" value="Submit">
    </form>

    <script>
        function showLoadingSpinner() {
            document.getElementById("loading-spinner").classList.remove("hidden");
        }

        function toggleDetails() {
            var detailsSection = document.getElementById("more-details");
            var toggleButton = document.getElementById("toggle-details");

            var loggedIn = "{{ logged_in }}";

            if (loggedIn === "False") {
                alert("Please login to view more details");
                return;
            }

            if (detailsSection.style.display === "none") {
                detailsSection.style.display = "block";
                toggleButton.textContent = "Less Details";
            } else {
                detailsSection.style.display = "none";
                toggleButton.textContent = "More Details";
            }
        }
    </script>
</body>
</html>